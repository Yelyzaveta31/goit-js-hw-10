{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport izitoast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iconError from '../img/icon-error.svg';\n\nconst buttonStart = document.querySelector('[data-start]');\nbuttonStart.setAttribute('disabled', true);\n\nconst inputDatetime = document.querySelector('#datetime-picker');\n\nconst timerElements = {\ndays: document.querySelector('[data-days]'),\nhours: document.querySelector('[data-hours]'),\nminutes:document.querySelector('[data-minutes]'),\nseconds: document.querySelector('[data-seconds]')\n};\n\nlet userSelectedDate;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      checkData(selectedDates[0]);\n    },\n  };\n  flatpickr(inputDatetime, options);\n\n  const izitoastOptions = {\n    title: 'Error',\n    message: 'Please choose a date in the future',\n    backgroundColor: 'red',\n    theme: 'dark',\n    color: 'red',\n    iconUrl: iconError,\n    position: 'topRight',\n};\n\nconst checkData = data => {\n    if (data.getTime() > Date.now()) {\n        userSelectedDate = data;\n        buttonStart.removeAttribute('disabled');\n    } else {\n        buttonStart.setAttribute('disabled', true);\n        izitoast.error (izitoastOptions);\n    }\n};\n\n  const addLeadingZero = value => {\n    return String(value).padStart(2, '0');\n  };\n\n   \n    const setValues = () => {\n        const diff = userSelectedDate.getTime() - Date.now();\n        let { days, hours, minutes, seconds } = convertMs(diff);\n        if (days < 0 && hours < 0 && minutes < 0 && seconds < 0) {\nreturn null;          \n        }\n\n        timerElements.days.textContent = addLeadingZero(days);\n        timerElements.hours.textContent = addLeadingZero(hours);\n        timerElements.minutes.textContent = addLeadingZero(minutes);\n        timerElements.seconds.textContent = addLeadingZero(seconds);\n        return true;\n    };\n\n   const stop = intervalId => {\n    clearInterval(intervalId);\n   }\n\n   const start = () => {\n    inputDatetime.setAttribute('disabled', true);\n    buttonStart.setAttribute('disabled', true);\n\n    setValues();\n    const timerIntervalId = setInterval(() => {\n        setValues() || stop(timerIntervalId);\n    }, 1000);\n  };\n  \n    \nbuttonStart.addEventListener('click', start);\n\n   function convertMs(diff){\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(diff / day);\n    // Remaining hours\n    const hours = Math.floor((diff % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((diff % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((diff % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds};\n  };\n\n"],"names":["buttonStart","inputDatetime","timerElements","userSelectedDate","options","selectedDates","checkData","flatpickr","izitoastOptions","iconError","data","izitoast","addLeadingZero","value","setValues","diff","days","hours","minutes","seconds","convertMs","stop","intervalId","start","timerIntervalId"],"mappings":"+IAOA,MAAMA,EAAc,SAAS,cAAc,cAAc,EACzDA,EAAY,aAAa,WAAY,EAAI,EAEzC,MAAMC,EAAgB,SAAS,cAAc,kBAAkB,EAEzDC,EAAgB,CACtB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAQ,SAAS,cAAc,gBAAgB,EAC/C,QAAS,SAAS,cAAc,gBAAgB,CAChD,EAEA,IAAIC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAUD,EAAc,CAAC,CAAC,CAC3B,CACL,EACEE,EAAUN,EAAeG,CAAO,EAEhC,MAAMI,EAAkB,CACtB,MAAO,QACP,QAAS,qCACT,gBAAiB,MACjB,MAAO,OACP,MAAO,MACP,QAASC,EACT,SAAU,UACd,EAEMH,EAAYI,GAAQ,CAClBA,EAAK,QAAO,EAAK,KAAK,IAAG,GACzBP,EAAmBO,EACnBV,EAAY,gBAAgB,UAAU,IAEtCA,EAAY,aAAa,WAAY,EAAI,EACzCW,EAAS,MAAOH,CAAe,EAEvC,EAEQI,EAAiBC,GACd,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAI9BC,EAAY,IAAM,CACpB,MAAMC,EAAOZ,EAAiB,QAAS,EAAG,KAAK,IAAG,EAClD,GAAI,CAAE,KAAAa,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAI,EACtD,OAAIC,EAAO,GAAKC,EAAQ,GAAKC,EAAU,GAAKC,EAAU,EACvD,MAGCjB,EAAc,KAAK,YAAcU,EAAeI,CAAI,EACpDd,EAAc,MAAM,YAAcU,EAAeK,CAAK,EACtDf,EAAc,QAAQ,YAAcU,EAAeM,CAAO,EAC1DhB,EAAc,QAAQ,YAAcU,EAAeO,CAAO,EACnD,GACf,EAESE,EAAOC,GAAc,CAC1B,cAAcA,CAAU,CACxB,EAEKC,EAAQ,IAAM,CACnBtB,EAAc,aAAa,WAAY,EAAI,EAC3CD,EAAY,aAAa,WAAY,EAAI,EAEzCc,IACA,MAAMU,EAAkB,YAAY,IAAM,CACtCV,EAAW,GAAIO,EAAKG,CAAe,CACtC,EAAE,GAAI,CACX,EAGAxB,EAAY,iBAAiB,QAASuB,CAAK,EAExC,SAASH,EAAUL,EAAK,CAOvB,MAAMC,EAAO,KAAK,MAAMD,EAAO,KAAG,EAE5BE,EAAQ,KAAK,MAAOF,EAAO,MAAO,IAAI,EAEtCG,EAAU,KAAK,MAAQH,EAAO,MAAO,KAAQ,GAAM,EAEnDI,EAAU,KAAK,MAASJ,EAAO,MAAO,KAAQ,IAAU,GAAM,EAEpE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}